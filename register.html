<!DOCTYPE html>
<html lang="en" ng-app="localPulseApp">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Register - LocalPulse</title>
  <link rel="stylesheet" href="style.css" />
  <style>
    .fade-in { animation: fadeIn 1s; }
    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    .shake { animation: shake 0.4s; }
    @keyframes shake {
      10%, 90% { transform: translateX(-2px); }
      20%, 80% { transform: translateX(4px); }
      30%, 50%, 70% { transform: translateX(-8px); }
      40%, 60% { transform: translateX(8px); }
    }
    .form-error { color: #e74c3c; font-size: 0.95em; }
    .auth-form { max-width: 350px; margin: 60px auto; background: #fff; border-radius: 12px; box-shadow: 0 2px 12px #0001; padding: 2em; }
    .auth-form input { width: 100%; margin-bottom: 1em; padding: 0.7em; border-radius: 6px; border: 1px solid #ddd; }
    .auth-form button { background: #ff5a5f; color: #fff; border: none; padding: 0.7em 2em; border-radius: 6px; cursor: pointer; }
    .auth-form button:disabled { background: #ccc; }
    .auth-form h2 { color: #ff5a5f; }
    body { background: linear-gradient(to right, #ff416c, #ff4b2b); }
  </style>
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.9/angular.min.js"></script>
</head>
<body ng-controller="RegisterController">

  <header class="navbar">
    <h1>LocalPulse</h1>
    <nav>
      <a href="indexx.html">Home</a>
      <a href="#">Events</a>
      <a href="#">About</a>
      <a href="#">Contact</a>
      <a href="login.html">Login</a>
      <a href="register.html">Register</a>
    </nav>
  </header>

  <main>
    <form name="registerForm" class="auth-form fade-in" ng-submit="register()" novalidate ng-class="{'shake': registerError}">
      <h2>Register</h2>
      <input type="text" name="username" ng-model="user.username" placeholder="Username" required />
      <div class="form-error" ng-show="registerForm.username.$touched && registerForm.username.$invalid">
        Username is required.
      </div>
      <input type="email" name="email" ng-model="user.email" placeholder="Email" required />
      <div class="form-error" ng-show="registerForm.email.$touched && registerForm.email.$invalid">
        Valid email is required.
      </div>
      <input type="password" name="password" ng-model="user.password" placeholder="Password" ng-minlength="5" required />
      <div class="form-error" ng-show="registerForm.password.$touched && registerForm.password.$invalid">
        Password (min 5 chars) is required.
      </div>
      <input type="password" name="confirm" ng-model="user.confirm" placeholder="Confirm Password" required />
      <div class="form-error" ng-show="user.password !== user.confirm && registerForm.confirm.$touched">
        Passwords do not match.
      </div>
      <div class="form-error" ng-show="registerError">
        Registration failed! Try again.
      </div>
      <button type="submit" ng-disabled="registerForm.$invalid || user.password !== user.confirm">Register</button>
      <p style="margin-top:1em;">Already have an account? <a href="login.html">Login</a></p>
    </form>
  </main>

  <script>
    var app = angular.module('localPulseApp', []);
    app.controller('RegisterController', function($scope, $timeout) {
      $scope.user = {};
      $scope.registerError = false;
      $scope.register = function() {
        if ($scope.user.username && $scope.user.email && $scope.user.password === $scope.user.confirm) {
          window.location.href = 'login.html';
        } else {
          $scope.registerError = true;
          $timeout(function() { $scope.registerError = false; }, 700);
        }
      };
    });
  </script>
</body>
</html>